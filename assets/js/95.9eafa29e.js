(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{391:function(t,a,s){"use strict";s.r(a);var r=s(14),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"til-20210906"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#til-20210906"}},[t._v("#")]),t._v(" TIL-20210906")]),t._v(" "),a("h2",{attrs:{id:"today"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#today"}},[t._v("#")]),t._v(" Today")]),t._v(" "),a("ul",[a("li",[t._v("Database Transaction")])]),t._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[t._v("#")]),t._v(" Contents")]),t._v(" "),a("h3",{attrs:{id:"당면-과제"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#당면-과제"}},[t._v("#")]),t._v(" 당면 과제")]),t._v(" "),a("blockquote",[a("p",[t._v("API Body에 넘겨받은 데이터를 Local Database에 기록하면서 다른 Server로 값을 전달해야 한다.")])]),t._v(" "),a("p",[a("strong",[t._v("문제상황")])]),t._v(" "),a("ul",[a("li",[t._v("로컬 Database에 insert 하는 곳에서 Error가 발생하는 경우")]),t._v(" "),a("li",[t._v("다른 서버에 데이터를 넘겨주는 과정에서 Error가 발생하는 경우")])]),t._v(" "),a("p",[t._v("두 가지 모두 다른 행동을 원상태로 돌려 놓아야 한다.")]),t._v(" "),a("p",[t._v("만약, 다른 서버에 보낸 요청에서 문제가 생겼을 때에는\nDatabase에 insert한 데이터를 invert하거나 Delete해야하는 상황이 발생하고")]),t._v(" "),a("p",[t._v("반대로, Database에서 insert, update등을 실패하면 다른 서버에 보낸 요청을 취소해야 한다.")]),t._v(" "),a("h3",{attrs:{id:"조치-방법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#조치-방법"}},[t._v("#")]),t._v(" 조치 방법")]),t._v(" "),a("ol",[a("li",[t._v("작업의 우선순위를 정한다.\nDB에 작성 후 요청을 보내거나, 다른 서버에 요청 후 DB에 기록하거나 하는데 그 순서를 정할 수 있다면\n어디에 롤백을 할지 정할 수 있다.")])]),t._v(" "),a("p",[t._v("다만,DB에 추가 조작을 해야하는 경우와 서버에 추가 콜을 보내야 하는 상황이 생기므로 리소스를 추가적으로 사용하게 된다.")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("transaction을 이용한다.\nDB에 데이터를 쓰고 읽고를 동시에 한다면 일종의 하나의 작업으로 보고 시행할 수 있다.\n이러한 방식을 Transaction이라고 한다.")])]),t._v(" "),a("p",[t._v("현재 서버는 nest(Javascript) 서버를 사용중이고, DB (mongoDB)를 사용하고 있어 해당 Framework에서 Mongoose를 이용해 Transaction을 구현 할수 있다.")])])}),[],!1,null,null,null);a.default=e.exports}}]);