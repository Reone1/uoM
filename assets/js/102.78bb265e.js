(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{398:function(o,t,r){"use strict";r.r(t);var l=r(14),a=Object(l.a)({},(function(){var o=this,t=o._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[t("h1",{attrs:{id:"til-20211109"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#til-20211109"}},[o._v("#")]),o._v(" TIL-20211109")]),o._v(" "),t("h2",{attrs:{id:"daily"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#daily"}},[o._v("#")]),o._v(" Daily")]),o._v(" "),t("ul",[t("li",[t("strong",[o._v("github actions을 이용한 CD 구현")])])]),o._v(" "),t("h2",{attrs:{id:"contents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[o._v("#")]),o._v(" Contents")]),o._v(" "),t("h3",{attrs:{id:"github-actions을-이용해-무중단-배포하기"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-actions을-이용해-무중단-배포하기"}},[o._v("#")]),o._v(" Github Actions을 이용해 무중단 배포하기")]),o._v(" "),t("p",[o._v("처음 기획은,")]),o._v(" "),t("blockquote",[t("p",[o._v("workflow 파일을 역할별로 구별하여 구현하고, 이후에 하나의 파일에서 Jobs를 통해 해당 workflow를 실행하는 방식으로 구현하고자 했다.")])]),o._v(" "),t("p",[t("strong",[o._v("문제점 :")]),o._v(" 🔥"),t("br"),o._v("\n=> 현재 사용하고 있는 프로젝트 repository는 비공개(private)로 되어있어 외부에서 접근이 불가능하다."),t("br"),o._v("\n하지만, 이 부분은 같은 레포지토리에 있는 workflow에 접근한다면 문제가 되지 않는것으로 파악했다.")]),o._v(" "),t("p",[o._v("workflow syntax document에서 외부 workflow 파일을 참조하는 방식은 두 가지로 나뉘어 지는데,")]),o._v(" "),t("ol",[t("li",[t("code",[o._v("repository_dispatch")])]),o._v(" "),t("li",[t("code",[o._v("workflow_dispatch")])]),o._v(" "),t("li",[t("code",[o._v("workflow_call")])])]),o._v(" "),t("p",[o._v("두 가지 이벤트 trigger를 설정하여 workflow를 실행하는 조건을 설정 할 수 있다.")]),o._v(" "),t("ul",[t("li",[t("p",[t("code",[o._v("repository_dispatch")]),o._v("\ncurl을 통해서 default repo에서 workflow를 실행하도록 설정 할 수 있다.")])]),o._v(" "),t("li",[t("p",[t("code",[o._v("workflow_dipatch")]),o._v("\ncurl을 통해서 원하는 branch에 workflow를 실행할 수 있다. actions 탭에서 workflow를 실행할 수 있다.")])]),o._v(" "),t("li",[t("p",[t("code",[o._v("workflow_call")]),o._v("\n다른 workflow에서 해당 workflow을 실행하게 할 수 있다.")]),o._v(" "),t("p",[o._v("Ref: "),t("a",{attrs:{href:"https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows#repository_dispatch",target:"_blank",rel:"noopener noreferrer"}},[o._v("Github Actions workflow"),t("OutboundLink")],1)])])]),o._v(" "),t("p",[t("code",[o._v("workflow_call")]),o._v("를 통해서 실행하려고 했지만, 해당 경로의 workflow를 찾지 못하는 에러가 발생했다.\n같은 경로의 workflow를 실행할 수 있다고 했지만, 해당 경로의 workflow에 접근권한이 없는것 처럼 나타난다.")]),o._v(" "),t("p",[o._v("이번 프로젝트에서는 jobs을 단계적으로 생성하고 "),t("code",[o._v("needs")]),o._v("에 이전 job을 할당하여, 작업 완료에 따른 프로세스를 구성했다.")])])}),[],!1,null,null,null);t.default=a.exports}}]);